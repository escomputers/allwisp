{% extends "base.html" %}
{% load static %}


{% block content %}
 <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
  <h2>Emissione documenti ricorrenti</h2>
</div>
</div>
  </div>
  </section>
   

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-3">
           <div class="sticky-top mb-3">
              <div class="card">
                <div class="card-header">
                 <h4>Crea nuovo flusso</h4>
                </div>
                <div class="card-body">
			<form action="" method="post">
		{% csrf_token %}
	   
	   
	<div class="form-group">

	<!-- Scelta tipo documento -->
	<div class="input-group mb-3">
	<label for="doctype">Seleziona tipo documento</label>
	 <select name="color" id="doctype" class="form-control select2bs4_doc" style="width: 100%;">
                    <option value="#0275d8">Fattura</option>
                    <option value="#999999">Fattura proforma</option>
                    <option value="#5cb85c">DDT</option>
                    <option value="#f0ad4e">Note di credito</option>
					<option value="#d9534f">Note di debito</option>

		</select> 
		</div>
		
		<label for="title">Nome</label>
		<div class="input-group mb-3">
		  <input type="text" class="form-control pull-right" id="title" name="title" placeholder="Nome" required>
		</div>
		
		<label for="data_avvio">Data di avvio</label>
		<div class="input-group mb-3">
		 <input type="text" id="data_avvio" hidden>
		<div class="input-group-prepend">
        <span class="input-group-text"><i class="far fa-calendar"></i></span>
         </div>
		  <input type="text" name="data_avvio" id="data_avvio" onfocus="(this.type='date')" class="form-control pull-right" placeholder="Data avvio">
		</div>
		
		<label for="intervallo_date">Intervallo date</label>
		<div class="input-group mb-3">
		 <input type="text" id="intervallo_date" hidden>
		<div class="input-group-prepend">
        <span class="input-group-text"><i class="far fa-calendar"></i></span>
         </div>
		  <input type="text" name="start"  onfocus="(this.type='date')" class="form-control pull-right" placeholder="Data inizio" id="start">
		</div>
	
		<div class="input-group mb-3">
		<div class="input-group-prepend">
        <span class="input-group-text"><i class="far fa-calendar"></i></span>
         </div>
		   <input type="text" name="end"  onfocus="(this.type='date')" class="form-control pull-right" placeholder="Data fine" id="end">
		</div>
	
		<div class="togglediv_sel_cliente">
		<div class="input-group mb-3">
		<select name="notify_time" class="form-control select2bs4" style="width: 100%;">
		<option value="">Seleziona cliente</option>
		<option value="1H" id="sel_h1">1 ora prima</option>
		<option value="1D" id="sel_d1">1 giorno prima</option>
		<option value="7D" id="sel_d2">1 settimana prima</option>
		</select>
		</div>
		</div>
		
		
		<!-- Pulsantiera -->
		<table class="table table-bordered">
			<tbody>
			<tr>
			<td><label id="label_sel_cliente">Cliente singolo</label></td>
			<td style="text-align:center;">
			<input type="checkbox" id="sel_cliente" data-toggle="toggle" data-on="On" data-off="Off" data-onstyle="success" data-offstyle="secondary" data-size="normal">
			</td>
			</tr>
			</tbody>
		</table>
			

		<!-- Pulsante submit -->
		<button class="btn btn-primary" type="submit" name="submit" value="Submit">Add</button>
	
	</div>
	</form>
	  <!-- /.form group -->
	  
		</div>
		<!-- /.card-body -->
		
	  </div>
	  <!-- /.card -->
	  
	</div>
	 <!-- /.sticky-top mb-3 -->
	
  </div>
   <!-- /.col-md-3 -->
   
  <div class="col-md-9">
	<div class="sticky-top mb-3">
   <div class="card">
    <div class="card-header">
    <h4>Prossime ricorrenze</h4>
    </div>
	
	
	<div class="card-body">
		<table id="results_table" class="table table-bordered table-hover">
		<thead>
		<tr>
		<th>ID</th>
		<th>Nome</th>
		<th>Documento</th>
		<th>Prossimo avvio</th>
		<th>Stato</th>
		</tr>
		</thead>
		<tbody>
		
	{% if schedules %}
		{% for i in schedules %}
		<tr>
		<td>{{ i.id }}</td>
		<td>{{ i.func }}</td>
		<td></td>
		<td>{{ i.next_run }}</td>
		<td><span class="badge bg-warning"><font size="3.1em">null</font></span></td>
		</tr>
	{% endfor %}
	{% endif %}	
	
	
		<tr>
		<td>3</td>
		<td>fatture maggio</td>
		<td>Fattura</td>
		<td>10/05/2022</td>
		<td><span class="badge bg-warning"><font size="3.1em">In attesa</font></span></td>
		</tr>
		
		<tr>
		<td>2</td>
		<td>note di credito aprile</td>
		<td>Nota di Credito</td>
		<td>01/04/2022</td>
		<td><span class="badge bg-success"><font size="3.1em">Successo</font></span></td>
		</tr>
		
		
		<tr>
		<td>1</td>
		<td>fatt marzo</td>
		<td>Fattura</td>
		<td>10/03/2022</td>
		<td><span class="badge bg-danger"><font size="3.1em">Errore</font></span></td>
		</tr>
		
		</tbody>
		</table>
		</div>
		
		
	<!-- /.fine tabella risultati -->
	
							</div>
							<!-- /.card -->

						</div>
						<!-- /.sticky-top mb-3 -->
				
					</div>
					 <!-- /.col-md-3 -->

				</div>
				<!-- /.row -->

			</div>
			<!-- /.container-fluid -->

		</section>
		<!-- /.content -->
	
	</div>
	<!-- /.content-wrapper -->

<!-- FINE HTML -->



<!-- funzioni pulsanti -->
<script>
//AL CARICAMENTO DELLA PAGINA NASCONDI DIV*************************
	$(function () {
	$(".togglediv_sel_cliente").hide();
	});
//INIZIALIZZA DATATABLES***************************************
  $(function () {
    $('#results_table').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      //"ordering": true,
	  //column index to be ordered
	  "order": [[ 0, "desc" ]],
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });	
  
//PULSANTE SELEZIONA CLIENTE SINGOLO*************************
	$("#sel_cliente").change(function() {
	var stato_checkbox_sel_cliente = $('#sel_cliente').prop('checked')
	if(stato_checkbox_sel_cliente == true){
	$(".togglediv_sel_cliente").show();
	}else{
	$(".togglediv_sel_cliente").hide();
	}
});
</script>


<!-- Select2 script -->
<script>
	//Initialize Select2 Elements
	$(function () {
     //Initialize Select2 Elements
    $('.select2bs4_doc').select2({
	placeholder: 'Select doc type',
	theme: 'bootstrap4',
    })
	
	$('.select2bs4').select2({
	//allowClear: true,
	theme: 'bootstrap4',
    })
	
	})
</script>


{% endblock %}
