{% extends "base.html" %} 
{% block content %}  

<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Aggiungi clienti</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item">
              <a href="homepage.html">Home</a>
            </li>
            <li class="breadcrumb-item active">Aggiungi clienti</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section><!-- Main content -->

  <section class="content">

    <div class="container-fluid">
        <!-- left column -->
        <div class="col-xl-12">
      <div class="row">
              <div class="col-sm-3">
                <select class="form-select form-select-lg mb-3"  name="stato_cliente" id="stato_cliente">
                    <option selected ></option>
                    <option value="1">Attivo</option>
                    <option value="2">Interessato</option>
                    <option value="3">Moroso</option>
                  </select>
                </div>
                <div class="col-sm-4">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                   <label><h4><I> Scegli il tipo di cliente da inserire in anagrafica</I></h4></label>
             
                  </div>
                </div>
                </div>
              <hr>
       <form method="POST" action="" id="1">
      {% csrf_token %}
          <div class="card card-warning">
            <div class="card-header">
              <h3 class="card-title">Anagrafica Clienti Attivi</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
          <div class="row">
          <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_installazione">Data installazione</label> 
                     {{ clienti.data_installazione }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_inizio_contratto">Data inizio contratto</label> 
                     {{ clienti.data_inizio_contratto }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_fine_contratto">Data fine contratto</label> 
                     {{ clienti.data_fine_contratto }}
                    </div>
                  </div>
                </div>
                <hr>
                <div class="row">
                   <div class="col-sm-3">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label> <h4>Stato cliente:</h4></label> 
              <input type="text" id="stato_cliente_dato" name="stato_cliente_dato" value="Attivo" hidden/>
                  </div>
                </div>
                <div class="col-sm-3">
                  <label><h4><I><B>Attivo <span class="badge badge-success">A</span></B></I></h4></label>
                </div>
              </div>
              <hr>
              <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="customer_id">Id cliente. <font color="#ff4d01">Ultimo id inserito: <B><I>{{ultimoid.customer_id}}</font></I></B></label> 
                      {{ clienti.customer_id }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="ragionesociale">Nome e Cognome</label> 
                      {{ clienti.ragionesociale }}

                    </div>
                  </div>
                  
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">P.iva</label> 
                      {{ clienti.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="c_univoco">C.univoco fattura</label> 
                    {{ clienti.codiceunivoco_sdi}}
                  </div>
                </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="c_f">Codice fiscale</label> 
                      {{ clienti.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- checkbox -->
                    <div class="form-group">
                       <label for="scelta_fattura">Invia fattura cortesia </label>
                        {{ clienti.scelta_fattura }}
                    </div>
                  </div>
                </div>
               
               
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="residenza">residenza/sede legale</label> 
                       {{ clienti.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune di residenza</label> 
                      {{ clienti.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      <input id="prov" type="text" class="form-control" placeholder="Provincia di residenza" name="prov_res">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                      {{ clienti.cap_res }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-4">
                    <!-- checkbox -->
                    <div class="form-group">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" type="checkbox" id="residenza_uguale" value="uguale_residenza" name="uguale" onclick="residenzaugualeinstallazione(this.form)" > <label for="residenza_uguale" class="custom-control-label">Residenza e indirizzo di installazione coincidono</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="indirizzo_installazione">indirizzo di installazione</label> 
                      {{ clienti.indirizzo_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_installazione">Comune di installazione</label> 
                     {{ clienti.comune_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov_installazione">Prov</label> 
                    {{ clienti.prov_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap_installazione">CAP</label> 
                      {{ clienti.cap_inst}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                      {{ clienti.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ clienti.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                      {{ clienti.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ clienti.fax}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="iban">Iban</label> 
                    {{ clienti.codice_iban}}
                  </div>
                </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                      {{ clienti.note}}
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <div class="form-group">
                      <label for="gps" >coordinate Gps</label> 
                      {{ clienti.coordinate_gps}}
                    </div>
                  </div>
                </div>
          <!-- general form elements disabled -->
          <div class="card card-danger">
            <div class="card-header">
              <h3 class="card-title">Condizioni Contrattuali</h3>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="row">
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="offerta">Offerta Voip</label> 
                   {{ clienti.offerta_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="numero_voce">Numero voce</label> 
                    {{ clienti.numero_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="nodo">Nodo:</label> 
                    {{ clienti.nodo}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="ip">EventualeIP assegnato</label> 
                    {{ clienti.ip_statico}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="mac adress">Mac address:</label> 
                    {{ clienti.mac_adress}}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label for="scegli_offerta" >Scegli l'Offerta</label> 
                    {{ clienti.offerta_internet}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="cadenza_pagamenti">Cadenza pagamenti</label> 
                   {{ clienti.cadenza_pagamento}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="importo_installazione">Importo installazione</label> 
                   {{ clienti.importo_attivazione}}
                  </div>
                </div>
                <div class="col-sm-2">
                <div class="form-group">
                    <label for="importo_offerta_dedicata">importo offerta dedicata</label> 
                    {{ clienti.importo_offerta_dedicata}}
                  </div> 
           
              </div>
             
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="metodo_pagamento">Metodo di pagamento</label> 
                    {{ clienti.metodo_pagamento}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="spese_riscossione">spese riscossione bollette</label> 
                    {{ clienti.spese_invio_bolletta}}
                  </div>
                </div>
              </div>  
           <div class="row">
              <div class="panel-footer">
              <!--  <button type="submit" name="savecreate" value="Save and Create Invoice" class="btn btn-warning">salva e crea fattura</button>-->
                <input type="submit" value='Submit' name="submit" class="btn btn-success"/>
                {% if errors %}
    {% for field in clienti %}
        {% for error in field.errors %}
          <div class="alert alert-danger" role="alert"> {{ error }} </div>
        {% endfor %}
    {% endfor %}
{% endif %}
              </div>
            </div>
			
            <!-- /.card-body -->
          </div>
        </div>
      </div>
    </div>
  </form>

        <form method="POST" action="" id="2" name="2">
      {% csrf_token %}
          <div class="card card-warning">
            <div class="card-header">
              <h3 class="card-title">Anagrafica Clienti interessati</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
          <div class="row">
          <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_contattato">Data del primo contatto</label> 
                     {{ interessato.data_contattato }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_contattare_stabilito_cliente">Data contatto fissata dal cliente</label> 
                     {{ interessato.data_contattare_stabilito_cliente }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_da_contattare">Data da contattare (politica aziendale)</label> 
                     {{ interessato.data_da_contattare }}
                    </div>
                  </div>
                </div>
                <hr>
          <div class="row">
              <div class="col-sm-3">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label> <pre><h5>Stato cliente: <B>Interessato <span class="badge badge-primary">I</span></B></h5></pre></label>
                    
                
              <input type="text" id="stato_cliente_dato" name="stato_cliente_dato" value="Interessato" hidden>
                  </div>
                </div>
                </div>
              <hr>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="customer_id">Id cliente. <font color="#ff4d01">Ultimo id inserito: <h9><B><I>{{ultimoid.customer_id}}</I></B></font></h9></label> 
                      {{ interessato.customer_id }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="ragionesociale">Nome e Cognome</label> 
                      {{ interessato.ragionesociale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">P.iva</label> 
                      {{ interessato.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="c_f">Codice fiscale</label> 
                      {{ interessato.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <br>
                    <br>
                    <!-- checkbox -->
                    <div class="form-group">
                      <div class="custom-control custom-checkbox checkbox-xl">           
                        <input class="custom-control-input" type="checkbox" id="residenza_modello1" value="modelloresidenza" name="modello" onclick="residenzamodello(this.form)"> 
                        <label for="residenza_modello1" class="custom-control-label">Residenza modello inventato </label>
                      </div>
                    </div>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="residenza">residenza/sede legale</label> 
                       {{ interessato.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune di residenza</label> 
                      {{ interessato.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      {{ interessato.prov_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                      {{ interessato.cap_res }}
                    </div>
                  </div>
                </div>
       <div class="row">
               <div class="col-sm-4">
                    <!-- checkbox -->
                    <div class="form-group">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" type="checkbox" id="residenza_ugualeinteressato" value="uguale_interessato" name="ugualeinteressato" onclick="residenzaugualeinteressato(this.form)"> 
                        <label for="residenza_ugualeinteressato" class="custom-control-label">Residenza uguale a indirizzo di installazione</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="indirizzo_installazione">indirizzo di installazione</label> 
                      {{ interessato.indirizzo_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_installazione">Comune di installazione</label> 
                     {{ interessato.comune_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov_installazione">Prov</label> 
                    {{ interessato.prov_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap_installazione">CAP</label> 
                      {{ interessato.cap_inst}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                      {{ interessato.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ interessato.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                      {{ interessato.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ interessato.fax}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                      {{ interessato.note}}
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <div class="form-group">
                      <label for="gps" >coordinate Gps</label> 
                      {{ interessato.coordinate_gps}}
                    </div>
                  </div>
                </div>
       <div class="row">
              <div class="panel-footer">
              <!--  <button type="submit" name="savecreate" value="Save and Create Invoice" class="btn btn-warning">salva e crea fattura</button>-->
                <input type="submit" value='Submit' name="submit" class="btn btn-success"/>
                {% if interessato.errors %}
    {% for field in interessato %}
        {% for error in field.errors %}
          <div class="alert alert-danger" role="alert"> {{ error }} </div>
        {% endfor %}
    {% endfor %}
{% endif %}
              </div>
           
            <!-- /.card-body -->
          </div>
         </div>

           

           
          
         <!-- /.card-body -->
          </div><!-- /.card -->
      <!--/.col (right) -->
</form>
</div></div>
  </section>
</div>

<script>
$(function () {
  bsCustomFileInput.init();
});
</script> 

<!--Questo script serve per cambiare il form visualizzato in base alla scelta del'operatore nel  div select
                |
                |
                V     
-->
<script type="text/javascript">
$(document).ready(function(){
$('#1').hide();
$('#2').hide();
$('#stato_cliente').change(function(){
    var formID = $(this).val();
    $('form').css('display','none');
    $('#'+formID).css('display','block');
})
  
  })

</script>
<!--Questo script serve per riempire i campi di indirizzo d'installazione e indirizzo di residenza con testo predefinito.
                |
                |
                V     
-->
<script>
function residenzamodello(b) {

  if(b.modello.checked == true) {

    b.indirizzo_res1.value ="Via non data";
    b.comune_res1.value ="Comune non dato";
    b.prov_res1.value="Provincia non data";
    b.cap_res1.value="Cap non data";

    b.indirizzo_inst1.value =  b.indirizzo_res1.value;

    b.comune_inst1.value = b.comune_res1.value;
   
    b.prov_inst1.value = b.prov_res1.value;
    
    b.cap_inst1.value = b.cap_res1.value;
                 

  }
  
  if(b.modello.checked == false) {
    b.indirizzo_res1.value ="";
    b.comune_res1.value ="";
    b.prov_res1.value="";
    b.cap_res1.value="";
    b.indirizzo_inst1.value ="";
    b.comune_inst1.value ="";
    b.prov_inst1.value="";
    b.cap_inst1.value="";
  }
}
</script>
<!--Questo script serve per riempire i campi di indirizzo d'installazione nella stessa maniera dell'indirizzo di residenza per il form clienti interessati.
                |
                |
                V     
-->
<script>
function residenzaugualeinteressato(a) {

  if(a.ugualeinteressato.checked == true) {

    a.indirizzo_inst1.value =  a.indirizzo_res1.value;

    a.comune_inst1.value = a.comune_res1.value;
   
    a.prov_inst1.value = a.prov_res1.value;
    
    a.cap_inst1.value = a.cap_res1.value;
                 

  }
  
  if(a.ugualeinteressato.checked == false) {
    a.indirizzo_inst1.value ="";
    a.comune_inst1.value ="";
    a.prov_inst1.value="";
    a.cap_inst1.value="";
  }
}
</script>

<!--Questo script serve per riempire i campi di indirizzo d'installazione nella stessa maniera dell'indirizzo di residenza per il form clienti attivi.
                |
                |
                V     
-->
<script>
function residenzaugualeinstallazione(f) {

  if(f.uguale.checked == true) {

    f.indirizzo_inst.value =  f.indirizzo_res.value;

    f.comune_inst.value = f.comune_res.value;
   
    f.prov_inst.value = f.prov_res.value;
    
    f.cap_inst.value = f.cap_res.value;
                 

  }
  
  if(f.uguale.checked == false) {
    f.indirizzo_inst.value ="";
    f.comune_inst.value ="";
    f.prov_inst.value="";
    f.cap_inst.value="";
  }
}
</script>
{% endblock %}