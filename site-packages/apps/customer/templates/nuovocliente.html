{% extends "base.html" %} 
{% block content %}  

<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Scegli il tipo di cliente da inserire in anagrafica</h1>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section><!-- Main content -->

  <section class="content">
    <div class="container-fluid">
        <div class="col-xl-12">
      <div class="row">
              <div class="col-sm-3">
                <select class="form-control"  name="stato_cliente" id="stato_cliente">
                    <option selected ></option>
                    <option value="1">Attivo</option>
                    <option value="2">Interessato</option>
                  </select>
                </div>
                </div>
              <hr>
       <form method="POST" action="" id="1">
      {% csrf_token %}
	  
	  	<!-- sezione per errori form -->
	   {% if clienti.errors %}
        {% for error in field.errors %}
       <div class="alert alert-danger" role="alert"> 
	   {{ error }} 
	   </div>
		{% endfor %}
		{% endif %}


          <div class="card card-success">
            <div class="card-header">
              <h3 class="card-title">Anagrafica Clienti Attivi</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
		 
          <div class="row">
          <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_installazione">Data installazione</label> 
                     {{ clienti.data_installazione }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_inizio_contratto">Data inizio contratto</label> 
                     {{ clienti.data_inizio_contratto }}
                    </div>
                  </div>

				  
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_fine_contratto">Data fine contratto</label> 
                     {{ clienti.data_fine_contratto }}
                    </div>
                  </div>
                </div>
				
			<hr>
            <div class="row">
                   <div class="col-sm-3">
                  <div class="form-group">
                    <label> <h4>Stato cliente:&nbsp;</h4></label> 
					<input type="text" id="stato_cliente_dato" name="stato_cliente_dato" value="Attivo" hidden/>
                  <label><h4><I><B>Attivo <span class="badge badge-success">A</span></B></I></h4></label>
                </div>
				</div>
				
				  <div class="col-sm-3">
                      <label for="customer_id">ID cliente</label>
					  {%if ultimoid.customer_id%}
					  <font color="#ff4d01">Ultimo ID inserito: <B><I>{{ultimoid.customer_id}}</font></I></B>
					  {%else%}
					<font color="#ff4d01">Ultimo ID inserito: <B><I>{{ultimoid}}</font></I></B>
					  {%endif%}
                      {{ clienti.customer_id }}
                    </div>
				
              </div>
            <hr>
			  
              <div class="row">
                  <div class="col-sm-4">
                    <div class="form-group">
                      <label for="ragionesociale">Ragione sociale</label> 
                      {{ clienti.ragionesociale }}

                    </div>
                  </div>
                  
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">Partita IVA</label> 
                      {{ clienti.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                  <div class="form-group">
                    <label for="c_univoco">Codice Univoco</label> 
                    {{ clienti.codiceunivoco_sdi}}
                  </div>
                </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="c_f">Codice Fiscale</label> 
                      {{ clienti.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
					<div class="form-group">
				<label id="scelta_fattura">Fattura cortesia</label><br>
				<input type="checkbox" name="scelta_fattura" id="scelta_fattura" data-toggle="toggle" data-on="On" data-off="Off" data-onstyle="success" data-offstyle="secondary" data-size="normal">
				</div>
                </div>
				  
                </div>
               
               
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="residenza">Sede legale</label> 
                       {{ clienti.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune sede legale</label> 
                      {{ clienti.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-1">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      <input id="prov" type="text" class="form-control" placeholder="Provincia" name="prov_res">
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                      {{ clienti.cap_res }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-4">
                    <!-- checkbox -->
                    <div class="form-group">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" type="checkbox" id="residenza_uguale" value="uguale_residenza" name="uguale" onclick="residenzaugualeinstallazione(this.form)" > <label for="residenza_uguale" class="custom-control-label">Sede legale e sede di installazione coincidono</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="indirizzo_installazione">Sede di installazione</label> 
                      {{ clienti.indirizzo_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_installazione">Comune di installazione</label> 
                     {{ clienti.comune_inst}}
                    </div>
                  </div>
                  <div class="col-sm-1">
                    <div class="form-group">
                      <label for="prov_installazione">Prov</label> 
                    {{ clienti.prov_inst}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="cap_installazione">CAP</label> 
                      {{ clienti.cap_inst}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                      {{ clienti.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ clienti.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                      {{ clienti.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ clienti.fax}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                      {{ clienti.note}}
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <div class="form-group">
                      <label for="gps" >coordinate GPS</label> 
                      {{ clienti.coordinate_gps}}
                    </div>
                  </div>
                </div>
      
	  
          <div class="card card-danger">
            <div class="card-header">
              <h3 class="card-title">Condizioni Contrattuali</h3>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="row">
                <div class="col-sm-2">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label for="scegli_offerta" >Offerta Internet</label> 
                    {{ clienti.offerta_internet}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="importo_installazione">Importo installazione</label> 
                   {{ clienti.importo_attivazione}}
                  </div>
                </div>
                <div class="col-sm-2">
                <div class="form-group">
                    <label for="importo_offerta_dedicata">importo offerta dedicata</label> 
                    {{ clienti.importo_offerta_dedicata}}
                  </div> 
              </div>
			   </div> 
			   
			   
			    <div class="row">
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="offerta">Offerta Voip</label> 
                   {{ clienti.offerta_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="numero_voce">Numero voce</label> 
                    {{ clienti.numero_voip}}
                  </div>
                </div>
               </div>
         
             
			</div>
			</div> 
			<!-- /.fine card condizioni contrattuali -->
			
			   <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">Dati di pagamento</h3>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="row">
			  <div class="col-sm-2">
                  <div class="form-group">
                    <label for="cadenza_pagamenti">Cadenza pagamenti</label> 
                   {{ clienti.cadenza_pagamento}}
                  </div>
                </div>
				
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="metodo_pagamento">Metodo di pagamento</label> 
                    {{ clienti.metodo_pagamento}}
                  </div>
                </div>
			 <div class="col-sm-5">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="iban">IBAN</label> 
                    {{ clienti.codice_iban}}
                  </div>
                </div>
			 <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="spese_riscossione">Spese invio bolletta</label> 
                    {{ clienti.spese_invio_bolletta}}
                  </div>
                </div>
				
			   </div> 
			   </div> 
			    </div> 
		<!-- /.fine card dati di pagamento -->
		
		 <div class="card card-secondary">
            <div class="card-header">
              <h3 class="card-title">Dati di connessione</h3>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="row">
				<div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="nodo">Nodo</label> 
                    {{ clienti.nodo}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="ip">Indirizzo IP</label> 
                    {{ clienti.ip_statico}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="mac adress">MAC address</label> 
                    {{ clienti.mac_adress}}
                  </div>
                </div>
              </div>
			  
			  
			</div> 
			</div> 
			
		<!-- /.fine card dati di connessione -->
		
           <div class="row">
              <div class="panel-footer">
              <!--  <button type="submit" name="savecreate" value="Save and Create Invoice" class="btn btn-warning">salva e crea fattura</button>-->
                <input type="submit" value='Submit' name="submit" class="btn btn-success"/>
              </div>
            </div>
			
            
          </div>
        </div>
      </div>
    </div>
	<!-- /. fine card success anagrafica clienti attivi-->
  </form>

        <form method="POST" action="" id="2" name="2">
      {% csrf_token %}
	  
	  	  {% if interessato.errors %}
        {% for error in field.errors %}
         <div class="alert alert-danger" role="alert"> 
		 {{ error }} 
		 </div>
		{% endfor %}
		{% endif %}
		
          <div class="card card-secondary">
            <div class="card-header">
              <h3 class="card-title">Anagrafica Clienti interessati</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
          <div class="row">
          <div class="col-sm-4">
			<div class="form-group">
			  <label for="data_contattato">Data primo contatto</label> 
			 {{ interessato.data_contattato }}
			</div>
		  </div>
		  <div class="col-sm-4">
			<div class="form-group">
			  <label for="data_contattare_stabilito_cliente">Data contatto fissata dal cliente</label> 
			 {{ interessato.data_contattare_stabilito_cliente }}
			</div>
		  </div>
		  <div class="col-sm-4">
			<div class="form-group">
			  <label for="data_da_contattare">Data da contattare (politica aziendale)</label> 
			 {{ interessato.data_da_contattare }}
			</div>
		  </div>
		</div>
		
         <hr>
          <div class="row">
		 <div class="col-sm-3">
                  <div class="form-group">
                    <label> <h4>Stato cliente:&nbsp;</h4></label> 
					<input type="text" id="stato_cliente_dato" name="stato_cliente_dato" value="Interessato" hidden>
                  <label><h4><I><B>Interessato <span class="badge badge-primary">I</span></B></I></h4></label>
                </div>
				</div>
				
				 <div class="col-sm-2">
                      <label for="customer_id">ID cliente interessato 
                      {{ interessato.customer_id }}
                  </div>
				
                </div>
         <hr>
			  
			<div class="row">
                  <div class="col-sm-4">
                    <div class="form-group">
                      <label for="ragionesociale">Ragione sociale</label> 
                     {{ interessato.ragionesociale }}

                    </div>
                  </div>
                  
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">Partita IVA</label> 
                    {{ interessato.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="c_f">Codice Fiscale</label> 
                       {{ interessato.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
					<div class="form-group">
				<label id="residenza_modello1">Residenza modello inventato</label><br>
				<input type="checkbox" name="modello" id="residenza_modello1" value="modelloresidenza" onchange="residenzamodello(this.form)" data-toggle="toggle" data-on="On" data-off="Off" data-onstyle="success" data-offstyle="secondary" data-size="normal">
				</div>
                </div>
				  
                </div>
               
               
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="residenza">Sede legale</label> 
                        {{ interessato.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune sede legale</label> 
                    {{ interessato.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-1">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      {{ interessato.prov_res }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                     {{ interessato.cap_res }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-4">
                    <!-- checkbox -->
                    <div class="form-group">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" type="checkbox" id="residenza_ugualeinteressato" value="uguale_interessato" name="ugualeinteressato" onclick="residenzaugualeinteressato(this.form)"> 
                        <label for="residenza_ugualeinteressato" class="custom-control-label">Residenza uguale a indirizzo di installazione</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="indirizzo_installazione">Sede di installazione</label> 
                      {{ interessato.indirizzo_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_installazione">Comune di installazione</label> 
                     {{ interessato.comune_inst}}
                    </div>
                  </div>
                  <div class="col-sm-1">
                    <div class="form-group">
                      <label for="prov_installazione">Prov</label> 
                   {{ interessato.prov_inst}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="cap_installazione">CAP</label> 
                      {{ interessato.cap_inst}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                     {{ interessato.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ interessato.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                    {{ interessato.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ interessato.fax}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                       {{ interessato.note}}
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <div class="form-group">
                      <label for="gps" >coordinate GPS</label> 
                        {{ interessato.coordinate_gps}}
                    </div>
                  </div>
                </div>
       <div class="row">
              <div class="panel-footer">
              <!--  <button type="submit" name="savecreate" value="Save and Create Invoice" class="btn btn-warning">salva e crea fattura</button>-->
                <input type="submit" value='Submit' name="submit" class="btn btn-success"/>
              </div>
          </div>
		
		
         </div>
       </div>
	</form>
	<!-- fine anagrafica clienti interessati -->
	

	<!-- fine sezione comune a tutte le card -->
	</div>
	</div>
  </section>
</div>



<!--Questo script serve per cambiare il form visualizzato in base alla scelta del'operatore nel  div select -->
<script type="text/javascript">
$(document).ready(function(){
$('#1').hide();
$('#2').hide();
$('#stato_cliente').change(function(){
    var formID = $(this).val();
    $('form').css('display','none');
    $('#'+formID).css('display','block');
})
  
  })

</script>

<!--Script validazione codice univoco e IBAN -->
<script type="text/javascript">
  $( document ).ready(function() {
  var sdi_obbligatorio = document.getElementById("#piva");
  var iban_obbligatorio = document.getElementById("#metodo_pagamento");
  console.log(sdi_obbligatorio)
  if (sdi_obbligatorio != ""){
 $('#codiceunivoco_sdi').attr("required","required");
}
if (iban_obbligatorio == "Rid"){
 $('#codice_iban').attr("required","required");
}
});
</script>

<!--Questo script serve per riempire i campi di indirizzo d'installazione e indirizzo di residenza con testo predefinito. -->
<script>
function residenzamodello(b) {

  if(b.modello.checked == true) {

    b.indirizzo_res1.value ="Via non data";
    b.comune_res1.value ="Comune non dato";
    b.prov_res1.value="Provincia non data";
    b.cap_res1.value="Cap non data";

    b.indirizzo_inst1.value =  b.indirizzo_res1.value;

    b.comune_inst1.value = b.comune_res1.value;
   
    b.prov_inst1.value = b.prov_res1.value;
    
    b.cap_inst1.value = b.cap_res1.value;
                 

  }
  
  if(b.modello.checked == false) {
    b.indirizzo_res1.value ="";
    b.comune_res1.value ="";
    b.prov_res1.value="";
    b.cap_res1.value="";
    b.indirizzo_inst1.value ="";
    b.comune_inst1.value ="";
    b.prov_inst1.value="";
    b.cap_inst1.value="";
  }
}
</script>

<!--Questo script serve per riempire i campi di indirizzo d'installazione nella stessa maniera dell'indirizzo di residenza per il form clienti interessati.-->
<script>
function residenzaugualeinteressato(a) {

  if(a.ugualeinteressato.checked == true) {

    a.indirizzo_inst1.value =  a.indirizzo_res1.value;

    a.comune_inst1.value = a.comune_res1.value;
   
    a.prov_inst1.value = a.prov_res1.value;
    
    a.cap_inst1.value = a.cap_res1.value;
                 

  }
  
  if(a.ugualeinteressato.checked == false) {
    a.indirizzo_inst1.value ="";
    a.comune_inst1.value ="";
    a.prov_inst1.value="";
    a.cap_inst1.value="";
  }
}
</script>

<!--Questo script serve per riempire i campi di indirizzo d'installazione nella stessa maniera dell'indirizzo di residenza per il form clienti attivi.-->
<script>
function residenzaugualeinstallazione(f) {

  if(f.uguale.checked == true) {

    f.indirizzo_inst.value =  f.indirizzo_res.value;

    f.comune_inst.value = f.comune_res.value;
   
    f.prov_inst.value = f.prov_res.value;
    
    f.cap_inst.value = f.cap_res.value;
                 

  }
  
  if(f.uguale.checked == false) {
    f.indirizzo_inst.value ="";
    f.comune_inst.value ="";
    f.prov_inst.value="";
    f.cap_inst.value="";
  }
}
</script>
{% endblock %}