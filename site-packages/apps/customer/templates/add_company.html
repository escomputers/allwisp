{% extends "base.html" %} 
{% block content %}  
<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Aggiungi azienda cliente</h1>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section><!-- Main content -->

  <section class="content">
   
    <div class="container-fluid">
      
        <!-- left column -->
        <div class="col-xl-12">
          
       <form method="POST" action="">
      {% csrf_token %}
          <div class="card card-warning">
            <div class="card-header">
              <h3 class="card-title">Dati dell'azienda</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="ragionesociale">Nome e Cognome</label> 
                      {{ azienda.ragionesociale }}

                    </div>
                  </div>
                  
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">P.iva</label> 
                      {{ azienda.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="c_f">Codice fiscale</label> 
                      {{ azienda.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="iban">Iban</label> 
                    {{ azienda.codice_iban}}
                  </div>
                </div>
                 <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="c_univoco">C.univoco fattura</label> 
                    {{ azienda.codiceunivoco_sdi}}
                  </div>
                </div>
                </div>
               
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="residenza">residenza/sede legale</label> 
                       {{ azienda.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune di residenza</label> 
                      {{ azienda.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      {{ azienda.prov_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                      {{ azienda.cap_res }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                      {{ azienda.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ azienda.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                      {{ azienda.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ azienda.fax}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                      {{ azienda.note}}
                    </div>
                  </div>
                </div>
             </div>
       </div>
           <div class="row">
              <div class="panel-footer">
              <!--  <button type="submit" name="savecreate" value="Save and Create Invoice" class="btn btn-warning">salva e crea fattura</button>-->
                <input type="submit" value='Submit' name="submit" class="btn btn-success"/>
                {% if azienda.errors %}
    {% for field in azienda %}
        {% for error in field.errors %}
          <div class="alert alert-danger" role="alert"> {{ error }} </div>
        {% endfor %}
    {% endfor %}
{% endif %}
              </div>
            </div>
			  </div>
            <!-- /.card-body -->
          </div>
         
          	</form>
           
          </div>
         <!-- /.card-body -->
          </div><!-- /.card -->
      <!--/.col (right) -->

  </section>
</div>


<script type="text/javascript">
  $('#prodotto').submit(function(event){
        event.preventDefault();
        var $prodotto = $(this);
        $.ajax({
        type: 'post',
        url: "{% url 'aggiungi_cliente'%}",
        data:{csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(), 
          data:$prodotto.serialize()},
        success: function($prodotto) {
        alert("I dati sono stati correttamente salvati");
        console.log(data)
        },
        error: function(error) {
        alert("I dati non sono stati salvati, controlla e reinvia");
        console.log(error)
        }
        });
        });
  
</script>
{% endblock %}