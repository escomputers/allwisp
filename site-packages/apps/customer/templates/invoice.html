{% extends 'base.html' %}

{% block content %}

<style type="text/css">
  .btn-purple, .btn-purple:hover, .btn-purple:active, .btn-purple:visited {
    background-color: #800080 !important;
    color: #ffffff;
}

 .big-checkbox {width: 30px; height: 30px;}

 .fielddatedisable { border: 0 !important; background-color: white !important;}

</style>
<style> 

.colorefootable {
  background-color: #f7f7f7 ;
  color: #000000;
  font-size: 100%;
}


.colorebodytable {
  background-color: #5cb85c   ;
  color: #000000;
  font-size: 100%;
}


#prezzo_subtot {
 color: black;
}

#prezzo_subtot::placeholder {
  color: black;
}

#total {
  color:black;
}

#total::placeholder {
  color: black;
}

input. {
  background: white;
  outline: none;
  border: none;
}

</style>
{% if error_message %}

<div class="alert alert-danger">{{ message }}</div>

{% endif %}

<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">


{% if invoice %}

  <!-- Content Wrapper. Contains page content. Contiene intestazione   -->

      </div><!-- /.container-fluid -->
    </section>

    <section class="content">
      <div class="container-fluid">
        <div class="card card-primary">
    <div class="card-header">

  <h2 class="card-title"><a id=tipo_documento>{{invoice.documento}}</a> n. {{invoice.invoice_id}}</h2>
</div>

<div class="card-body">
        <form action="" method="post" id="prodottiinfattura">
        {% csrf_token %}
        <div class="row">
          <div class="col-12">
            <div class="callout callout-info">
              <h5><i class="fas fa-info"></i> Nota:</h5>
              Quando si invierà la fattura, l'unico modo per annullarla è effettuare una nota di credito.
            </div>
          </div>
        </div>


            <!-- Main content -->
            <div class="invoice p-3 mb-3">
              <!-- title row -->
              <div class="row">
                <div class="col-8">
                  <h4><i><img alt="logo_cliente" src="/static/images/logocliente.png" width="80px"/></i></h4>
                   </div>
                   <br>
                   <br>
                   <br>
                   <br>
                </div>
                <br>
                <!-- /.row -->
                <br>
            
              <!-- info row -->
              <div class="row invoice-info">
                <div class="col-sm-4 invoice-col">
                  Emesso da:
                  <address>
                    <strong>Arpanet Italia s.r.l,</strong><br>
                    <strong>Adress:</strong>Via Caldera 21<br>
                    <strong>City.</strong>Milano, Mi<br>
                    <strong>zip.</strong>20153,&nbsp;Italy<br>
                    <strong>Tel:</strong>&nbsp; (804) 123-5432<br>
                    <strong>P.iva:</strong>&nbsp; It0121234551<br>
                    <strong>Email:</strong>&nbsp; info@arapnetitalia.com
                  </address>
                </div>
                <!-- /.col -->
                <div class="col-sm-4 invoice-col">
                  Cliente:
                  <address>
                    <strong>Customer:</strong>&nbsp;&nbsp;{{invoice.customer.ragionesociale}}<br>
                    <strong>adress:</strong> &nbsp;{{invoice.customer.indirizzo_res}}<br>
                   <strong>city:</strong> &nbsp;{{invoice.customer.comune_res}},&nbsp;&nbsp;{{invoice.customer.prov_res}},<br><strong>zip:&nbsp;</strong>{{invoice.customer.cap_res}},&nbsp; Italy<br>
                    <strong>tel:</strong>&nbsp;{{invoice.customer.recapito_tel}},&nbsp;&nbsp; <strong>Fax:&nbsp;</strong>{{invoice.customer.fax|default_if_none:''}}
                    <br>
                    {% if invoice.customer.piva %}
                     <strong>vat:</strong> &nbsp;{{invoice.customer.piva}},&nbsp;&nbsp;<br>
                     {% else %}
                     <strong>Tax id:</strong> &nbsp;<strong> <font color="#152238">{{invoice.customer.codicefiscale}},&nbsp;&nbsp;</font></strong><br>
                     {% endif %}
                    <a id="email_cliente" value="{{invoice.customer.email}}"><strong>Email:&nbsp;</strong>{{invoice.customer.email}}</a>  
                    <a id="pec_cliente" value="{{invoice.customer.pec}}">, <strong>Pec:&nbsp;</strong>{{invoice.customer.pec}}</a>
                  </address>
                </div>
                <!-- /.col -->
                <div class="col-sm-4 invoice-col">
                  <h4><b>{{invoice.documento}} numero. {{invoice.invoice_id}} </b><br></h4>
               <div class="form-group form-inline"> 
         <label ><font color="#0275d8">Data emissione:&nbsp;</font></label>     
        <input type="text" class="form-control  font-weight-bold text-primary fielddatedisable "  disabled name="invoicedate" id="invoicedate" value="{{ invoice.date|date:'d-m-Y' }}" size="6">
        </div>
                  <div class="form-group form-inline" id="scadenza_documento">
              <label class="col-xs-3 control-label" id="titolo_scadenza_documento"><font color="red">Scadenza fattura:</font></label>&nbsp;
               <div class="col-xs-2">
        <select id="selezionascadenza" class="form-control  font-weight-bold text-danger" style="width:auto;"><option selected value="0">Data emissione documento</option><option value="15 ">15 giorni emissione documento</option><option  value="30">30 giorni emmissione documento</option><option value="60">60 giorni emissione documento</option><option value="90">90 giorni emissione documento</option></select>
      </div>
    </div>
      </div>
                <!-- /.col -->
    </div>
              <!-- /.row -->
<br>
<br>
<br>
<br>
<!-- Table row -->
<div class="row">
  <div class="col-12 table-responsive">
      
    <table  id="tbl_posts" class="table table-stripe">
      <thead>
      <tr>
        <th>N.</th>
        <th>Prodotto</th>
        <th>Descrizione</th>
        <th>Quantità</th>
        <th>Prezzo</th>
        <th>Prezzo sub.totale</th>
        <th>Tax</th>
        <th>Totale</th>
        <th>Elimina</th>
    </tr>
  </thead>


<tbody id="tbl_posts_body" >
   
      <tr id="rec-1" class="tr_tabella colorebodytable">
        <td><span class="sn">1</span>.</td>
        <td><input class="form-control prodotto" title="inserisci il nome prodotto" type="text" size="30"></td>
        <td><textarea class="md-textarea form-control descrizione" title="inserisci la descrizione" rows="1"></textarea></td>
        <td><input type="number" min="0" title="inserisci solo numeri" oninput="validity.valid||(value='');" class="quantita form-control"></td>
        <td><input type="number" min="0" title="inserisci solo numeri"  oninput="validity.valid||(value='');" class="prezzo form-control"></td>
        <td><input type="number"   min="0" disabled class="prezzo_sub_tot form-control"></td>
        <td><input type="number" min="0"  title="inserisci solo numeri" oninput="validity.valid||(value='');"  class="tax form-control"></td>
        <td><input type="number" min="0"  disabled class="totale form-control"></td>
        <td><a class="btn btn-xs delete-record" data-id="1"><i><img alt="archivia" src="/static/images/cestino.svg" width="32px" title="elimina riga"></i></a></td>
     </tr>

      
</tbody>
 </table>
   

  </div>

</div>
                <!-- /.col -->
              <!-- /.row -->           <!--aggiunge crd per le righe della fattura-->


<div class="row">
    <div class="col-sm-2">
    <label>Aggiungi riga</label>
    <div class="well clearfix">
        <a class="btn  pull-right add-record" data-added="0"><i><img alt="aggiungi riga" src="/static/images/aggiungi.svg" width="50px" title="aggiungi riga"></i></a>
      </div>
    </div>
  </div>
    <div class="row">
    <div class="col-sm-12">
      <label>Note</label>
      <textarea class='md-textarea form-control note' cols="330" id='note' rows='2'></textarea>
    </div>
  </div>


<br>
<br>

<div class="row">
<div class="col-sm-4">
  <h5>Altre voci fattura</h5>
</div>
</div>

<div class="row">
<div class="col-12 table-responsive">
  <table class="table table-stripe">

  <tfoot>
    <tr>
    <th>Sconto</th>
    <th>Spese spedizione</th>
    <th>Altri oneri</th>
    <th>Descrizione altri oneri</th>
</tr>
<tr class="colorefootable">  
    <td><input id="campo_sconto" min="0" title="inserisci solo numeri" oninput="validity.valid||(value='');" type="number" title="inserisci solo numeri" value="0.00" class="sconto form-control" /> </td>
<td><input type="number" title="inserisci solo numeri" oninput="validity.valid||(value='');" min="0" id="spese_spedizione" value="0.00" class="spese_spedizione form-control"/></td>

<td><input type="number" title="inserisci solo numeri" oninput="validity.valid||(value='');" min="0" id="altri_oneri_fattura"   value="0.00" class="altri_oneri_fattura form-control"/></td> 
<td id="descrizioneoneri"><textarea class='md-textarea form-control altri_oneri_descrizione' id='altri_oneri_descrizione'  value="Non dichiarato" disabled="true" cols='100' rows='2'></textarea></td> 


</tr>
</tfoot>


</table>


</div>
</div>

<div class="form-check">
  <input class="big-checkbox" type="checkbox" value="" id="checkboxsconto">
  <label for="checkboxsconto" id="label_sconto">
    Seleziona per inserire lo sconto in percentuale
  </label>
<br>
<br>
<br>
<br>
  <div class="row">
        <!-- accepted payments column -->
        <div class="col-6 ">
          <p class="lead">Metodi di pagamento:</p>
          <img src="/static/images/visa.png" alt="Visa">
          <img src="/static/images/mastercard.png" alt="Mastercard">
          <img src="/static/images/american-express.png" alt="American Express">
          <img src="/static/images/paypal2.png" alt="Paypal">
          <p class="text-muted well well-sm shadow-none" style="margin-top: 10px;">
            Il pagamento dovrà effettuarsi con i metodi sopra elencati, salvo che non sia previsto come metodo di pagamento l'accredito in un conto corrente
          </p>
        </div>
        
        <!-- /.col -->
        <div class="col-4 ml-auto">
          <h5 class="lead text-danger" >Scadenza fattura <p class="lead text-danger" id="scadenza"></p></h5>
          <div class="table-responsive">
            <table class="table">
              <tr>
                <th style="width:50%">Totale tasse escl.</th>
                <td id="tasse_escluse">€0.00</td>
              </tr>
              <tr>
                <th>Iva</th>
                <td id="tot_iva">€ 0.00</td>
              </tr>
              <tr>
                <th>Costo spedizione</th>
                <td id="cost_spedizioni">€ 0.00</td>
              </tr>
              <tr>
                <th>Altri oneri</th>
                <td id="altri_oneri">€ 0.00</td>
              </tr>
              <th>Sconto applicato</th>
              <td id='sconto_applicato'>€ 0.00</td>
              <tr>
                <th>Totale:</th>
                <td id="totale_della_fattura"><strong>€ 0.00</strong></td>
              </tr>
            </table>
          </div>
                </div>
                <!-- /.col -->
              </div>
              <!-- /.row dlla tabella riepilogo -->

              <!-- this row will not appear when printing -->
              <div class="row no-print">
                <div class="col-12">
                  <a href="invoice-print.html" rel="noopener" target="_blank" class="btn btn-default"><i class="fas fa-print"></i> Print</a>
                  <button type="button" class="btn btn-warning float-right"><i class="far fa-credit-card"></i> Submit Payment
                  </button>

                  <button type="button" class="btn btn-primary float-right" style="margin-right: 5px;">
                    <i class="fas fa-download"></i> Generate PDF
                  </button>
                   <button  value="submit" type="Submit" class="btn btn-purple float-right" id ="send_invoice" style="margin-right: 5px;">
                    <i class="fas fa-file-invoice"></i> Send invoice
                  </button>
                </div>
              </div>
            
            </div>
            <!-- /.invoice -->
          </div><!-- /.col -->
      </div>
    </form>
  </div>
</div>
    </div>
  </section>
</div>
       <!-- /.row -->
    <!-- /.content -->
 





<!-- Delete confirmation modal -->
<div class="modal fade" id="confirmdelete" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm</h4>
      </div>
      <div class="modal-body">

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
        <a href="#" class="btn btn-danger">Yes</a>
      </div>
    </div>
  </div>
</div>




  
<div style="display:none;">
    <table id="sample_table">
       <tr id="" class="tr_tabella colorebodytable">
        <td><span class="sn"></span>.</td>
       <td><input class="form-control prodotto" type="text" size="30"></td>
        <td><textarea class="md-textarea form-control descrizione" rows="1"></textarea></td>
        <td><input type="number" min="0" title="inserisci solo numeri"title="inserisci solo numeri" oninput="validity.valid||(value='');" class="quantita form-control"></td>
        <td><input type="number" min="0" title="inserisci solo numeri" oninput="validity.valid||(value='');" class="prezzo form-control"></td>
        <td><input type="number" min="0"  disabled class="prezzo_sub_tot form-control"></td>
        <td><input type="number" min="0" title="inserisci solo numeri" oninput="validity.valid||(value='');"  class="tax form-control"></td>
        <td><input type="number" min="0"  disabled class="totale form-control"></td>
        <td><a class="btn btn-xs delete-record" data-id="1"><i><img alt="elimina" src="/static/images/cestino.svg" width="32px" title="elimina riga"></i></a></td>
     </tr>
   </table>
 </div>





<script type="text/javascript">
//dichiarazione variabile globale
var spese_spedizione={};
spese_spedizione=0;

var altrioneri_fattura={};
altrioneri_fattura=0



var sconto_applicato={};
sconto_applicato=0


$(function() {


 //----------------- titoli e colorazione tipo fattura e scadenza-----------------------
  
  
  var tipo_documento=$('#tipo_documento').text();
 
  if (tipo_documento == "Nota di credito")
 


  {
    
    $('#scadenza_documento').hide()

  }


  else if(tipo_documento=="Preventivo"){
    $('#titolo_scadenza_documento').text('Scadenza preventivo')
    $('#titolo_scadenza_documento').css("color","red")
   
 
  };

    //----------------------fine------------------------




//-------------per cambiare i valori del checkbox e valore sconto-----------------------
  $('#checkboxsconto ').click(function(){ 
  //------- per la selezione dello sconto in percentuale o no----------
    
    if($('#checkboxsconto').is(':checked')) {

      $("#label_sconto").text("Deseleziona per inserire lo sconto in unità di valuta");
      
      //fare clacoli percentuale

      var totsubtot=parseFloat($('#tasse_escluse').text());
      var iva= parseFloat($('#tot_iva').text());
      var totale_fattura_ = totsubtot + iva
      var valore_per_cento_sconto=parseFloat($('#campo_sconto').val());
   
      var sconto=(totale_fattura * valore_per_cento_sconto)/100
      var totale_fattura_con_sconto=totale_fattura - sconto

     //condizione primo if
      if(totale_fattura_con_sconto > 0){
        
        $('#totale_della_fattura').text(totale_fattura_con_sconto)
        $('#sconto_applicato').text(sconto)

      } 
      
      else if(totale_fattura_con_sconto<=0){
        
        alert("attenzione hai inserito uno sconto maggiore dell'importo della fattura, si prega di sistemare!");

        $('#totale_della_fattura').text('0.00');
        $('#sconto_applicato').text(sconto);

      }



  }//fine condizione primo if
  

  else{

    $("#label_sconto").text('Seleziona per inserire lo sconto in percentuale');
    
    //fare calcoli unità valuta
      var totsubtot=parseFloat($('#tasse_escluse').text());
      var iva= parseFloat($('#tot_iva').text());
      var totale_fattura = totsubtot + iva
      var sconto=parseFloat($('#campo_sconto').val());
      var totale_fattura_con_sconto=totale_fattura - sconto
    
   

    //secondo if condizione else
   
    if(totale_fattura_con_sconto>0){
    
    $('#totale_della_fattura').text(totale_fattura_con_sconto)
    $('#sconto_applicato').text(sconto)

  } 
  
  else if(totale_fattura_con_sconto<=0){
    alert("attenzione hai inserito uno sconto maggiore dell'importo della fattura, si prega di sistemare!")
    $('#totale_della_fattura').text('0.00')
    $('#sconto_applicato').text(sconto)

  } //fine else della seconda condizione di else


} //fine condizione della verifica del checkbox
  
 }); //----------------------fine evento del calcolo per il checkbox------------------


  


  //-----------------------per il calcolo della scadenza fattura--------------------------

  var options0 = { year: 'numeric', month: 'numeric', day: 'numeric' }
   var selezione_scadenza0=parseInt($('#selezionascadenza').val());
   var date=new Date();
   date.setDate(date.getDate() + selezione_scadenza0);
   var data_formattata=date.toLocaleDateString("it-IT", options0);
   $('#scadenza').text(data_formattata)
   $('#invoicedate').text(date)
   

   $('#selezionascadenza').change(function(){
   var scadenza=new Date();
   var selezione_scadenza=parseInt($('#selezionascadenza').val());
   var options = { year: 'numeric', month: 'numeric', day: 'numeric' };//se si usa long(al posto del numeric si vedrà il nome corrispondente), si può mettere weekday per sapere il giorno della data

   scadenza.setDate(scadenza.getDate() + selezione_scadenza);
   var a=scadenza.toLocaleDateString("it-IT", options);
   $('#scadenza').text(a)

  });
  



  //------------------------fine caloclo scadenza fattura---------------------------


});
</script>

<script type="text/javascript">
  
$(document).ready(function(){//per i calcoli fattura in fattura e ricalcolo aumento riga

$('table').on("change input keyup", function(){// fare ogni volta che cambia il valore die campi
  thisRow = $(this).parent().parent();//prende la riga della tabella
   var quantita  = Number(thisRow.find('td > .quantita').val());   // trova il valore di quantità
    var prezzo = Number(thisRow.find('td > .prezzo').val()); // trova il valore di prezzo(di ogni prezzo)
    var iva = Number(thisRow.find('td > .tax').val());//trova il valore dell'iva
    
    thisRow.find('td>.totale').val('');//azzera il valore di totale
    
    thisRow.find('td>.prezzo_sub_tot').val('');//azzera il valore di prezzo_sub_totale
    
    
    

    var subtotaleriga=prezzo*quantita
    
    var percento=(subtotaleriga*iva)/100
   
    var totaleriga=subtotaleriga+percento
    
    thisRow.find('td>.prezzo_sub_tot').val(subtotaleriga);
    thisRow.find('td>.totale').val(totaleriga);
    
    

    //inizio calcoli
    var totaleconiva = 0;
    var quotasubtot = 0;
    
    var totalesconto=0
    spese_spedizione=0;
    altrioneri_fattura=0;
    spese_spedizione=parseFloat($('#spese_spedizione ').val());
    altrioneri_fattura=parseFloat($('#altri_oneri_fattura ').val());



  $(".prezzo_sub_tot").each(function(){
        quotasubtot += +$(this).val();
    });


    $(".totale").each(function(){//per ognio campo totale
        totaleconiva += +$(this).val();
    });

    var totaleiva=totaleconiva-quotasubtot

    
    //--------------------------------inizio calcolo sconto-----------------------------

   
  sconto_applicato=parseFloat($('#campo_sconto').val());

  if ($('#checkboxsconto').is(':checked')){ //sconto in unità di valuta
    $('#sconto_applicato').text(sconto_applicato)
    totalesconto=sconto_applicato
  }



  else {//sconto in percentuale
    var somma_dello_sconto=sconto_applicato/100
    $('#sconto_applicato').text(sconto_applicato + '%')
     totalesconto=totaleconiva*somma_dello_sconto
  };

  


   var totalefatturasconto1=totaleconiva - totalesconto
   var totalescontato2 = totalefatturasconto1 + altrioneri_fattura + spese_spedizione

  //---------------------------fine calcolo sconto-----------------------------------------


if(totalescontato2>0){
  totalescontato2=0.00
  $('#totale_della_fattura').text(totalescontato2);
}
else{
  alert("Attenzione, hai inserito uno sconto maggiore dell'imponibile, si prega di sistemare");
  $('#totale_della_fattura').text('0.00');
}
   
  



//--------------stampa nella tabella riepilogativa--------------------------

  $("#cost_spedizioni").text(spese_spedizione)
  $("#altri_oneri").text(altrioneri_fattura)
  $("#tasse_escluse").text(quotasubtot)
  $("#tot_iva").text(totaleiva)
  $('#totale_della_fattura').text(totalescontato2)

//-------------------------------fine stampa------------------------
});


});





</script>




<script type="text/javascript"> //per la tabella dinamica
  
  jQuery(document).on('a.add-record', 'click', function(e) {//per clonare la riga
     e.preventDefault();    
     var content = jQuery('#sample_table tr'),
     size = jQuery('#tbl_posts >tbody >tr').length + 1,
     element = null,    
     element = content.clone();
     element.attr('id', 'rec-'+size);
     element.find('.delete-record').attr('data-id', size);
     element.appendTo('#tbl_posts_body');
     element.find('.sn').html(size);

});



  jQuery(document).on('a.delete-record', 'click', function(e) {// per rimuovere la riga
     e.preventDefault();    
     var didConfirm = confirm("Sei sicuro di volere eleminare questa riga?");
      if (didConfirm == true) {
      var id = jQuery(this).attr('data-id');
      var targetDiv = jQuery(this).attr('targetDiv');
      jQuery('#rec-' + id).remove();

   //inizio calcolo tabella   quando si elimina elemento


   spese_spedizione=0;
   altrioneri_fattura=0;

   spese_spedizione=parseFloat($('#spese_spedizione ').val());
   altrioneri_fattura=parseFloat($('#altri_oneri_fattura ').val());
   var totaleconiva = 0;
   var quotasubtot = 0 ;
   var totalesconto = 0 ;

   $(".prezzo_sub_tot").each(function(){//calcolo del subtotale
        quotasubtot += +$(this).val();
    });


    $(".totale").each(function(){//calcolo del totale
        totaleconiva += +$(this).val();
    });

    var totaleiva=totaleconiva-quotasubtot//calcolo quota iva
        
    $('#tbl_posts_body tr').each(function(index) {// per rigenerare l'indice dei prodotti
      $(this).find('span.sn').html(index+1);
       });
       return true;
        } else {
        return false;
        }


  
    
   
    //----------------------------calcolo dello sconto eliminazione riga----------------------
        sconto_applicato=0
        sconto_applicato=parseFloat($('#campo_sconto').val());

        if($('#checkboxsconto').is(':checked')){ //sconto in unità di valuta
          $('#sconto_applicato').text(sconto_applicato)
          totalesconto=sconto_applicato
        }



        else {//sconto in percentuale
          var somma_dello_sconto=sconto_applicato/100
          $('#sconto_applicato').text(sconto_applicato + '%')
           totalesconto=totaleconiva*somma_dello_sconto
        };

        
  
    //---------------------------fine calcolo sconto-----------------------------------------
  var totalefatturasconto=totaleconiva - totalesconto
  var totalescontato = totalefatturasconto + altrioneri_fattura + spese_spedizione




if(totalescontato>0){
  totalescontato=0.00
  $('#totale_della_fattura').text(totalescontato);
}
else{
  alert("Attenzione, hai inserito uno sconto maggiore dell'imponibile, si prega di sistemare");
  $('#totale_della_fattura').text('0.00');
}
          

//visualizzazione nella tabella riepilogativa
  $("#cost_spedizioni").text(spese_spedizione);
    $("#altri_oneri").text(altrioneri_fattura);
    $("#tasse_escluse").text(quotasubtot);
    $("#tot_iva").text(totaleiva);
});
</script>



//da inserire dopo la dichiarazione di variabile e script di caricamento pagina


<script type="text/javascript">
  
$('#campo_sconto').on('change','input',function(){
    
    sconto_applicato=0
    sconto_applicato=parseFloat($('#campo_sconto').val());
    var totaleconiva=0;
    spese_spedizione=0;
    spese_spedizione=parseFloat($('##spese_spedizione').val());
    altrioneri_fattura=0;
    var totalesconto=0
    altrioneri_fattura=parseFloat($('#altri_oneri_fattura').val());


    $(".totale").each(function(){//per ognio campo totale
        totaleconiva += +$(this).val();
    });
        

    if($('#checkboxsconto').is(':checked')){ //sconto in unità di valuta
      $('#sconto_applicato').text(sconto_applicato)
      totalesconto=sconto_applicato
    }



    else {//sconto in percentuale
      var somma_dello_sconto=sconto_applicato/100
      $('#sconto_applicato').text(sconto_applicato + '%')
       totalesconto=totaleconiva*somma_dello_sconto
    };

   var totalefatturasconto=totaleconiva - totalesconto
    var totalescontato = totalefatturasconto + altrioneri_fattura + spese_spedizione

if(totalefatturasconto>0){
  totalescontato=0.00
  $('#totale_della_fattura').text(totalescontato);
}

  else if(totalescontato<=0){
  alert("Attenzione, lo sconto che hai inserito rende il conto della fattura 0 o negativa, si prega di sistemare");
  $('#totale_della_fattura').text('0.00');
}


else if(totalefatturasconto<=0){
  alert("Attenzione, hai inserito uno sconto maggiore dell'imponibile, si prega di sistemare");
  $('#totale_della_fattura').text('0.00');
}

});

</script>











<!-- ./wrapper -->
{% endif %}

{% endblock %}