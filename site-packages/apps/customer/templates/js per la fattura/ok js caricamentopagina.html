<script type="text/javascript">
var risultato_checkbox_sconto={};//dichiarazione variabile globale
risultato_checkbox_sconto='cifra';


var spese_spedizione={};
spese_spedizione=0;

var altrioneri_fattura={};
altrioneri_fattura=0


var sconto_applicato={};
sconto_applicato=0


$(function() {


 //----------------- titoli e colorazione tipo fattura e scadenza-----------------------
  
  var tipo_documento = $('#tipo_documento').text();
 
  if(tipo_documento == "Nota di credito")
 


  {
    
    $('#scadenza_documento').hide()

  }


  else if(tipo_documento == "Preventivo"){
    $('#titolo_scadenza_documento').text('Scadenza preventivo')
    $('#titolo_scadenza_documento').css("color","red")
   
 
  };

    //----------------------fine------------------------




//-------------per cambiare i valori del checkbox e valore sconto-----------------------
  $('#checkboxsconto ').click(function(){ 
  //------- per la selezione dello sconto in percentuale o no----------  
   // primo if
  
    if($('#checkboxsconto-1 ').is(checked)) {

      $("#label_sconto").text("Deseleziona per inserire lo sconto in unità di valuta");
      
      //fare clacoli percentuale

      var totsubtot=parseFloat($('#tasse_escluse').text());
      var iva= parseFloat($('#tot_iva').text());
      var totale_fattura_ = totsubtot + iva
      var valore_per_cento_sconto=parseFloat($('#campo_sconto').val());
   
      var sconto=(totale_fattura * valore_per_cento_sconto)/100
      var totale_fattura_con_sconto=totale_fattura - sconto

     //condizione primo if
      if(totale_fattura_con_sconto > 0){
        
        $('#totale_della_fattura').text(totale_fattura_con_sconto)
        $('#sconto_applicato').text(sconto)

      } 
      
      else{
        
        alert("attenzione hai inserito uno sconto maggiore dell'importo della fattura, si prega di sistemare!");

        $('#totale_della_fattura').text('0.00');
        $('#sconto_applicato').text(sconto);

      }



  }//fine condizione primo if
  

  else{
    $("#label_sconto").text('Seleziona per inserire lo sconto in percentuale');
    
    //fare calcoli unità valuta
      var totsubtot=parseFloat($('#tasse_escluse').text());
      var iva= parseFloat($('#tot_iva').text());
      var totale_fattura_ = totsubtot + iva
      var sconto=parseFloat($('#campo_sconto').val());
      var totale_fattura_con_sconto=totale_fattura - sconto
    
   

    //secondo if condizione else
   
    if(totalefatturaconsconto>0){
    
    $('#totale_della_fattura').text(totalefatturaconsconto)
    $('#sconto_applicato').text(sconto)

  } 
  
  else{
    alert("attenzione hai inserito uno sconto maggiore dell'importo della fattura, si prega di sistemare!")
    $('#totale_della_fattura').text('0.00')
    $('#sconto_applicato').text(sconto)

  } //fine else della seconda condizione di else


} //fine condizione della verifica del checkbox

  
 }); //----------------------fine evento del calcolo per il checkbox------------------


  


  //-----------------------per il calcolo della scadenza fattura--------------------------

  var options0 = { year: 'numeric', month: 'numeric', day: 'numeric' }
   var selezione_scadenza0=parseInt($('#selezionascadenza').val());
   var date=new Date();
   date.setDate(date.getDate() + selezione_scadenza0);
   var data_formattata=date.toLocaleDateString("it-IT", options0);
   $('#scadenza').text(data_formattata)
   $('#invoicedate').text(date)
   

   $('#selezionascadenza').change(function(){
   var scadenza=new Date();
   var selezione_scadenza=parseInt($('#selezionascadenza').val());
   var options = { year: 'numeric', month: 'numeric', day: 'numeric' };//se si usa long(al posto del numeric si vedrà il nome corrispondente), si può mettere weekday per sapere il giorno della data

   scadenza.setDate(scadenza.getDate() + selezione_scadenza);
   var a=scadenza.toLocaleDateString("it-IT", options);
   $('#scadenza').text(a)

  });
  



  //------------------------fine caloclo scadenza fattura---------------------------


});
</script>

