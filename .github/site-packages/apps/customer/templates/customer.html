{% extends 'base.html' %}
{% block content %}

{% if error_message %}
<div class="danger">{{ error_message }}</div>
{% endif %}


<!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h3>Dati del cliente: {{ clientenome.ragionesociale }} <span id="colore_stato" class="badge badge-success"><h4 id="cliente_stato">{{clientenome.stato_cliente_dato}}</h4></span></h3>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="homepage.html">Home</a></li>
              <li class="breadcrumb-item active">Cliente</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
          <!-- left column -->
          <div class="col-xl-12">
			  <form method="POST" action="" id="prodotto" >
			  {% csrf_token %}
          <div class="card card-warning">
            <div class="card-header">
              <h3 class="card-title">Anagrafica Clienti</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
          <div class="row" id="data_per_installazione">
          <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_installazione">Data installazione</label> 
                     {{ clienti.data_installazione }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_inizio_contratto">Data inizio contratto</label> 
                     {{ clienti.data_inizio_contratto }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_fine_contratto">Data fine contratto</label> 
                     {{ clienti.data_fine_contratto }}
                    </div>
                  </div>
                </div>
                 <div class="row" id="data_per_contattare">
          <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_installazione">Data contattato</label> 
                     {{ clienti.data_contattato }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_inizio_contratto">Data fissata dal cliente per contattarlo</label> 
                     {{ clienti.data_contattare_stabilito_cliente }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="data_fine_contratto">Data da contattare cliente(politicaziendale)</label> 
                     {{ clienti.data_da_contattare }}
                    </div>
                  </div>
                </div>
                <hr>
                <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                     {{ clienti.stato_cliente_dato }}
                    </div>
                  </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="customer_id">Id cliente</label> 
                     <h3><B> {{ clienti.customer_id }}</B></h3>
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="ragionesociale">Nome e Cognome</label> 
                      {{ clienti.ragionesociale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">P.iva</label> 
                      {{ clienti.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="c_f">Codice fiscale</label> 
                      {{ clienti.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- checkbox -->
                    <div class="form-group">
                       <label for="scelta_fattura">Invia fattura cortesia </label>
                        {{ clienti.scelta_fattura }}
                    </div>
                  </div>
                </div>
               
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="residenza">residenza/sede legale</label> 
                       {{ clienti.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune di residenza</label> 
                      {{ clienti.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      {{ clienti.prov_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                      {{ clienti.cap_res }}
                    </div>
                  </div>
                </div>
                   <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="indirizzo_installazione">indirizzo di installazione</label> 
                      {{ clienti.indirizzo_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_installazione">Comune di installazione</label> 
                     {{ clienti.comune_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov_installazione">Prov</label> 
                    {{ clienti.prov_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap_installazione">CAP</label> 
                      {{ clienti.cap_inst}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                      {{ clienti.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ clienti.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                      {{ clienti.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ clienti.fax}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                      {{ clienti.note}}
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <div class="form-group">
                      <label for="gps" >coordinate Gps</label> 
                      {{ clienti.coordinate_gps}}
                    </div>
                  </div>
                </div>
             </div>
       </div>
                 
          <!-- general form elements disabled -->
          <div class="card card-danger">
            <div class="card-header">
              <h3 class="card-title">Condizioni Contrattuali</h3>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="row">
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="offerta">Offerta Voip</label> 
                   {{ clienti.offerta_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="numero_voce">Numero voce</label> 
                    {{ clienti.numero_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="nodo">Nodo:</label> 
                    {{ clienti.nodo}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="ip">EventualeIP assegnato</label> 
                    {{ clienti.ip_statico}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="mac adress">Mac address:</label> 
                    {{ clienti.mac_adress}}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label for="scegli_offerta" >Scegli l'Offerta</label> 
                    {{ clienti.offerta_internet}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="cadenza_pagamenti">Cadenza pagamenti</label> 
                   {{ clienti.cadenza_pagamento}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="importo_installazione">Importo installazione</label> 
                   {{ clienti.importo_attivazione}}
                  </div>
                </div>
                <div class="col-sm-2">
                <div class="form-group">
                    <label for="importo_offerta_dedicata">importo offerta dedicata</label> 
                    {{ clienti.importo_offerta_dedicata}}
                  </div>
                </div>
                <div class="col-sm-3">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="iban">Iban</label> 
                    {{ clienti.codice_iban}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="c_univoco">C.univoco fattura</label> 
                    {{ clienti.codiceunivoco_sdi}}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="metodo_pagamento">Metodo di pagamento</label> 
                    {{ clienti.metodo_pagamento}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="spese_riscossione">spese riscossione bollette</label> 
                    {{ clienti.spese_invio_bolletta}}
                  </div>
                </div>
              </div>  
                <!-- /.card-body -->
    <div class="row">
    <div class="col-sm-12">
		<div class="card-footer float-right">
      <div class="panel-footer">
      
			<input type="submit" value="Update" class="btn btn-primary btn-lg" name="submit"/>
      <button  type="button" class="btn btn-danger btn-lg " data-toggle="modal" data-target="#exampleModalCenter">Archivia cliente
      </button>
      <button  class="btn btn-success btn-lg ">Esporta dati clienti</button>
      </div>
      </div>
      </div>
    ------

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Attenzione: Archivia cliente</h5>
        
         
      </div>
      <div class="modal-body">
        <div>
      <h4><font color="red">Attenzione:</font> Stai per archiviare il cliente: <h3>{{clientenome.ragionesociale}}.</h3> Se lo archivi il programma effettuerà l'ultima fattura e toglierà ogni riccorrenza di fatturazione per il cliente.
      Per poterlo riattivare dovrai andare nella sezione clienti archiviati e riattivarlo.<h4>
    </div>
      <label>Per procedere inserisci: <font color="red">archivia/{{clientenome.ragionesociale}}</font>
      <input type="text" id="nameelimina" name="nameelimina">
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Chiudi finestra</button>
        <button  name="archiviare" value="Update" id= "archiviare" type="submit" class="btn btn-danger" disabled>Archivia</button>
      </div>
    </div>
  </div>
</div>
      --------
               </div>
                </div>
              <!-- /.card-body -->
              
            </div>
	</div>
              
              
            </form>

                  
            <!-- /.card -->
          
          <!--/.col (right) -->
        </div>
        <!-- /.row -->
                
      </div><!-- /.container-fluid -->
          
    </section>

    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->
<!-- ./wrapper -->

<script type="text/javascript">
$(document).ready(function(){
$('#1').hide();
$('#2').hide();
$('#stato_cliente').change(function(){
    var formID = $(this).val();
    $('form').css('display','none');
    $('#'+formID).css('display','block');
})
  
  })

</script>
<script type="text/javascript">
  //
  $(document).ready(function(){
  var stato=document.getElementById('cliente_stato').innerHTML

  if (stato == "Interessato"){
      $('#colore_stato').removeClass('badge badge-success').addClass('badge badge-primary');
  }
  else if (stato == "Moroso"){
      $('#colore_stato').removeClass('badge badge-success').addClass('badge badge-warning');
  }
  else if ((stato == "moroso grave") || (stato == "archiviato") || (stato == "Questioni giudiziarie")){
      $('#colore_stato').removeClass('badge badge-success').addClass('badge badge-danger');
  }
});
</script>
<script type="text/javascript">
  $(document).ready(function(){
  var statodeiclienti=$('#cliente_stato').text()
  var nomedeiclienti=document.getElementById("ragionesociale").value;
  var elimina="archivia/"+nomedeiclienti
  var archiviato="archiviato"
  $("#nameelimina").keyup(function () {
  var controllato=document.getElementById("nameelimina").value;
  if(controllato == elimina) {
  $('#archiviare').removeAttr("disabled")
  $("#stato_cliente_dato").val(archiviato)        
 }
 else  {
  //$("stato_cliente_dato2").val(statodeiclienti);
  $('#archiviare').prop("disabled", true);
  $("#stato_cliente_dato").val(statodeiclienti)
  }
 
  
})
});

</script>
{% endblock %}
