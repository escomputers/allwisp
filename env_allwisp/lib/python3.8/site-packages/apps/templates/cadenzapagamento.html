{% extends "base.html" %} 
{% block content %}  
<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Aggiungi prodotto/offerta</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item">
              <a href="homepage.html">Home</a>
            </li>
            <li class="breadcrumb-item active">Aggiungi metodo pagamento</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section><!-- Main content -->

  <section class="content">
   
    <div class="container-fluid">
      
        <!-- left column -->
        <div class="col-xl-12">
         
       <form method="POST"  action="{% url 'aggiungi_periodo' %}" name="periodo" >
      {% csrf_token %}
          <div class="card card-warning">
            <div class="card-header">
              <h3 class="card-title">Aggiungi metodo pagamentop</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="nomeofferta">Nome periodo</label> 
                      <input id="nomeofferta" type="text" class="form-control" placeholder="Nome dell'offerta/prodotto" name="nomeofferta">
                    </div>
                  </div>
                   <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="descrizione">Descrizione</label> 
                      {{form.periodi}}
                    </div>
                  </div>
                  <div class="col-sm-1">
                    <div class="form-group">
                      <label for="prezzo">Numero di mesi</label> 
                        {{form.numero_mese}}
                    </div>
                  </div>
                  <div class="col-sm-2">
              <label>Salva</label> 
              <br>

                <button type="submit" name="save" class="btn btn-success">Salva prodotto</button>
             
            </div>
               <div class="row">
                  <div class="col-sm-10">
                    <br>
                    <br>
                    <h6><strong><bold><italic><font color="#fe5000">Attenzione:</font></h6></strong></bold></italic>
                    <br>
                   <h6><strong><bold><italic>Inserire il periodo e il numero relativo di mesi. Esempio mensile-1, bimestrale-2, trimestrale-3, semestrale-6, ecc </h6></strong></bold></italic>
                 </div>
                </div>
			  </div>
            <!-- /.card-body -->
          </div>
         
          	</form>
          </div>
         <!-- /.card-body -->
          </div><!-- /.card -->
      <!--/.col (right) -->

  </section>
</div>

<script type="text/javascript">
  $('#periodo').submit(function(event){
        event.preventDefault();
        var $periodo = $(this);
        $.ajax({
        type: 'post',
        url: "{% url 'aggiungi_periodo'%}",
        data:{csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(), 
          data:$periodo.serialize()},
        success: function($periodo) {
        alert("I dati sono stati correttamente salvati");
        },
        error: function(error) {
        alert("I dati non sono stati salvati, controlla e reinvia");
        }
        });
        });
  
</script>

{% endblock %}