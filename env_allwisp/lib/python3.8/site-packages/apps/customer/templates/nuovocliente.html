{% extends "base.html" %} 
{% block content %}  
<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Aggiungi clienti</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item">
              <a href="homepage.html">Home</a>
            </li>
            <li class="breadcrumb-item active">Aggiungi clienti</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section><!-- Main content -->

  <section class="content">
   
    <div class="container-fluid">
      
        <!-- left column -->
        <div class="col-xl-12">
         
       <form method="POST" action="">
      {% csrf_token %}
          <div class="card card-warning">
            <div class="card-header">
              <h3 class="card-title">Anagrafica Clienti</h3>
            </div><!-- /.card-header -->
         <div class="card-body">
          <div class="row">
              <div class="col-sm-4">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label> <h4>Stato cliente</h4></label>
               {{ clienti.stato_cliente }}
                  </div>
                </div>
              </div>
              <hr>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="customer_id">Id cliente</label> 
                      {{ clienti.customer_id }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="ragionesociale">Nome e Cognome</label> 
                      {{ clienti.ragionesociale }}

                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="codice_paese_IVA">Data inizio contratto</label> 
                     {{ clienti.data_inizio_contratto }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="p_iva">P.iva</label> 
                      {{ clienti.piva }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="c_f">Codice fiscale</label> 
                      {{ clienti.codicefiscale }}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- checkbox -->
                    <div class="form-group">
                       <label for="scelta_fattura">Invia fattura cortesia </label>
                        {{ clienti.scelta_fattura }}
                    </div>
                  </div>
                </div>
               
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="residenza">residenza/sede legale</label> 
                       {{ clienti.indirizzo_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_residenza">Comune di residenza</label> 
                      {{ clienti.comune_res }}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov">Prov</label> 
                      <input id="prov" type="text" class="form-control" placeholder="Provincia di residenza" name="prov_res">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap">CAP</label> 
                      {{ clienti.cap_res }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-4">
                    <!-- checkbox -->
                    <div class="form-group">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input" type="checkbox" id="residenza_uguale" value="uguale_residenza" name="uguale" onclick="residenzaugualeinstallazione(this.form)"> <label for="residenza_uguale" class="custom-control-label">Residenza e indirizzo di installazione coincidono</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-3">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="indirizzo_installazione">indirizzo di installazione</label> 
                      {{ clienti.indirizzo_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="comune_installazione">Comune di installazione</label> 
                     {{ clienti.comune_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="prov_installazione">Prov</label> 
                    {{ clienti.prov_inst}}
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label for="cap_installazione">CAP</label> 
                      {{ clienti.cap_inst}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="email">Email</label> 
                      {{ clienti.email}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="pec">PEC</label> 
                      {{ clienti.pec}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <!-- text input -->
                    <div class="form-group">
                      <label for="cel">Telefono</label> 
                      {{ clienti.recapito_tel}}
                    </div>
                  </div>
                  <div class="col-sm-2">
                    <div class="form-group">
                      <label for="fax">FAX</label> 
                      {{ clienti.fax}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <!-- textarea -->
                    <div class="form-group">
                      <label for="note">Note</label> 
                      {{ clienti.note}}
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <div class="form-group">
                      <label for="gps" >coordinate Gps</label> 
                      {{ clienti.coordinate_gps}}
                    </div>
                  </div>
                </div>
             </div>
       </div>
                 
          <!-- general form elements disabled -->
          <div class="card card-danger">
            <div class="card-header">
              <h3 class="card-title">Condizioni Contrattuali</h3>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="row">
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="offerta">Offerta Voip</label> 
                   {{ clienti.offerta_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="numero_voce">Numero voce</label> 
                    {{ clienti.numero_voip}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="nodo">Nodo:</label> 
                    {{ clienti.nodo}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="ip">EventualeIP assegnato</label> 
                    {{ clienti.ip_statico}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="mac adress">Mac address:</label> 
                    {{ clienti.mac_adress}}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2">
                  <!-- seleziona offerte -->
                  <div class="form-group">
                    <label for="scegli_offerta" >Scegli l'Offerta</label> 
                    {{ clienti.offerta_internet}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="cadenza_pagamenti">Cadenza pagamenti</label> 
                   {{ clienti.cadenza_pagamento}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="importo_installazione">Importo installazione</label> 
                   {{ clienti.importo_attivazione}}
                  </div>
                </div>
                <div class="col-sm-2">
                <div class="form-group">
                    <label for="importo_offerta_dedicata">importo offerta dedicata</label> 
                    {{ clienti.importo_offerta_dedicata}}
                  </div>
                </div>
                <div class="col-sm-3">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="iban">Iban</label> 
                    {{ clienti.codice_iban}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="c_univoco">C.univoco fattura</label> 
                    {{ clienti.codiceunivoco_sdi}}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-2">
                  <div class="form-group">
                    <label for="metodo_pagamento">Metodo di pagamento</label> 
                    {{ clienti.metodo_pagamento}}
                  </div>
                </div>
                <div class="col-sm-2">
                  <!-- text input -->
                  <div class="form-group">
                    <label for="spese_riscossione">spese riscossione bollette</label> 
                    {{ clienti.spese_invio_bolletta}}
                  </div>
                </div>
              </div>  
           <div class="row">
              <div class="panel-footer">
              <!--  <button type="submit" name="savecreate" value="Save and Create Invoice" class="btn btn-warning">salva e crea fattura</button>-->
                <input type="submit" value='Submit' name="submit" class="btn btn-success"/>
              </div>
            </div>
			  </div>
            <!-- /.card-body -->
          </div>
         
          	</form>
          </div>
         <!-- /.card-body -->
          </div><!-- /.card -->
      <!--/.col (right) -->

  </section>
</div>

<script>
$(function () {
  bsCustomFileInput.init();
});
</script> 

<script>
function residenzaugualeinstallazione(f) {

  if(f.uguale.checked == true) {

    f.indirizzo_inst.value =  f.indirizzo_res.value;

    f.comune_inst.value = f.comune_res.value;
   
    f.prov_inst.value = f.prov_res.value;
    
    f.cap_inst.value = f.cap_res.value;
                 

  }
  
  if(f.uguale.checked == false) {
    f.indirizzo_inst.value ="";
    f.comune_inst.value ="";
    f.prov_inst.value="";
    f.cap_inst.value="";
  }
}
</script>


<script type="text/javascript">
  $('#prodotto').submit(function(event){
        event.preventDefault();
        var $prodotto = $(this);
        $.ajax({
        type: 'post',
        url: "{% url 'add_client'%}",
        data:{csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(), 
          data:$prodotto.serialize()},
        success: function($prodotto) {
        alert("I dati sono stati correttamente salvati");
        console.log(data)
        },
        error: function(error) {
        alert("I dati non sono stati salvati, controlla e reinvia");
        console.log(error)
        }
        });
        });
  
</script>
{% endblock %}